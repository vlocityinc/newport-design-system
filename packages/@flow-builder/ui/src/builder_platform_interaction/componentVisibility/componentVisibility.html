<template>
    <builder_platform_interaction-condition-list
        parent-guid={guid}
        conditions={visibilityRule.conditions}
        condition-logic-options={conditionLogicOptions}
        condition-logic={visibilityRule.conditionLogic}
        logic-combobox-label={labels.logicComboboxLabel}
        container-element-type={elementType}
        ondeletecondition={handleDeleteCondition}
        onaddcondition={handleAddCondition}
        onpropertychanged={handlePropertyChanged}
        variant="narrow"
        onclick={handleOnClick}
    >
        <template if:true={showConditions}>
            <div slot="conditions">
                <template
                    for:each={conditionsWithPrefixes}
                    for:item="conditionWithPrefix"
                    for:index="conditionIndex"
                >
                    <div
                        class="slds-list__item slds-is-relative"
                        key={conditionWithPrefix.condition.rowIndex}
                    >
                        <builder_platform_interaction-row
                            item-prefix={conditionWithPrefix.prefix}
                            show-prefix
                            item-index={conditionIndex}
                            show-delete={showDeleteCondition}
                            show-delete-button={showDeleteConditionButton}
                            key={conditionWithPrefix.condition.rowIndex}
                        >
                            <div slot="rowBody">
                                <div
                                    class="condition-container"
                                    onclick={handleClickCondition}
                                    data-index={conditionIndex}
                                >
                                    <builder_platform_interaction-condition-list-item
                                        item-index={conditionIndex}
                                        condition={conditionWithPrefix.condition}
                                        deleteable={canDeleteConditions}
                                    >
                                    </builder_platform_interaction-condition-list-item>
                                </div>
                            </div>
                        </builder_platform_interaction-row>
                    </div>
                </template>
            </div>
        </template>
    </builder_platform_interaction-condition-list>
</template>
