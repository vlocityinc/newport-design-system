<template>
    <!-- TODO: Localize all labels after W-4693112 -->
    <div if:true={decisionElement}>
        <builder_platform_interaction-accordion>
            <div class="slds-p-horizontal_small slds-p-top_small">
                <builder_platform_interaction-label-description label={decisionElement.label} dev-name-label="Decision API Name" dev-name={decisionElement.name} description={decisionElement.description} onpropertychanged={handleEvent}> </builder_platform_interaction-label-description>
            </div>
            <h3 class="slds-section__title slds-accordion__summary-heading -slds-theme_shade slds-p-horizontal_small slds-shrink-none">
                <span>Outcomes</span>
                <div class="slds-text-color_weak slds-text-body_small slds-p-left_small slds-truncate">Create an outcome. You will then be able to select this as an outcome when connecting flow elements.</div>
            </h3>
            <div class="slds-vertical-tabs slds-is-relative slds-grow">
                <!-- TODO after W-4693112: Label instead of hardcoded "Outcome Order". Note: if string is long the + button goes to next line -->
                <builder_platform_interaction-reorderable-vertical-navigation
                        class="slds-theme_shade"
                        menu-items={outcomesWithDefaultOutcome}
                        active-item-id={activeOutcomeId}
                        onitemselected={handleOutcomeSelected}
                        onreorderlist={handleReorderOutcomes}
                        hide-footer=true>
                    <div slot="header">
                        Outcome Order
                        <lightning-helptext class="slds-p-left_xx-small" content="Outcomes are evaluated in the order in which they appear. Only the first matching outcome executes."></lightning-helptext>
                        <lightning-button-icon icon-name="utility:add" variant="border-filled" class="slds-p-left_xx-small"  onclick={handleAddOutcome} title="Add Outcome"></lightning-button-icon>
                    </div>
                    <div slot="footer"></div>
                </builder_platform_interaction-reorderable-vertical-navigation>
                <div class="slds-vertical-tabs__content slds-show" role="tabpanel">
                    <builder_platform_interaction-outcome if:true={activeOutcomeId}
                                                          outcome={activeOutcome}
                                                          show-delete={showDeleteOutcome}
                                                          ondeleteoutcome={handleDeleteOutcome}
                                                          onaddcondition={handleEvent}
                                                          ondeletecondition={handleEvent}
                                                          onupdatecondition={handleEvent}
                                                          onpropertychanged={handleEvent}></builder_platform_interaction-outcome>
                    <div if:false={activeOutcomeId}>
                        <div class="slds-grid slds-m-bottom_x-small">
                            <h3 class="slds-text-title_caps">
                                <span class="slds-truncate">Outcome Details</span>
                            </h3>
                        </div>
                        <builder_platform_interaction-label-description
                                label={decisionElement.defaultConnectorLabel}
                                onpropertychanged={handleDefaultOutcomeChangedEvent}
                                hide-dev-name=true
                                hide-description=true>
                        </builder_platform_interaction-label-description>
                        <div class="slds-text-align_center">
                            <img src="/img/LakeMountainSimplified.svg" />
                            <div class="slds-text-heading_medium slds-text-color_weak">No conditions needed.</div>
                            <div class="slds-text-body_regular slds-text-color_weak">This outcome can be used when none of the other outcome conditions are met.</div>
                        </div>
                    </div>
                </div>
            </div>
        </builder_platform_interaction-accordion>
    </div>
</template>
