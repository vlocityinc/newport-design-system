<template>
    <div
        class="canvas grab slds-is-relative"
        id="canvas"
        tabindex="0"
        onmouseenter={handleCanvasMouseEnter}
        onmouseleave={handleCanvasMouseLeave}
        onmousedown={handleCanvasMouseDown}
        onmousemove={handleCanvasMouseMove}
        onmouseup={handleCanvasMouseUp}
        oncontextmenu={handleCanvasContextMenu}
        ondragover={handleDragOver}
        ondrop={handleDrop}
    >
        <!--Overlay-->
        <div
            if:true={isMarqueeModeOn}
            class="overlay slds-is-absolute"
            id="overlay"
            onmouseenter={handleOverlayMouseEnter}
            onmouseleave={handleOverlayMouseLeave}
            onmousedown={handleOverlayMouseDown}
            onmousemove={handleOverlayMouseMove}
            onmouseup={handleOverlayMouseUp}
            oncontextmenu={handleOverlayContextMenu}
        >
            <!--Marquee-->
            <builder_platform_interaction-marquee-selection-box
                if:true={isMarqueeInProgress}
                id="marquee"
                marquee-start-point={marqueeStartPoint}
                marquee-end-point={marqueeEndPoint}
            >
            </builder_platform_interaction-marquee-selection-box>
        </div>

        <!--Inner Canvas-->
        <div class="inner-canvas slds-is-relative" id="innerCanvas">
            <!--Iterating over the nodes-->
            <template for:each={nodes} for:item="node">
                <builder_platform_interaction-node
                    node={node}
                    key={node.guid}
                    disable-add-connectors={canvasConfig.disableAddConnectors}
                    disable-delete={canvasConfig.disableDeleteElements}
                    disable-drag={canvasConfig.disableDragElements}
                    disable-multi-select={canvasConfig.disableMultiSelectElements}
                ></builder_platform_interaction-node>
            </template>
        </div>

        <!--Zoom Panel-->
        <div onmouseup={handleZoomPanelMouseUp} onmousedown={handleZoomPanelMouseDown}>
            <builder_platform_interaction-zoom-panel
                show-marquee-button={showMarqueeButton}
                is-marquee-mode-on={isMarqueeModeOn}
                is-zoom-out-disabled={isZoomOutDisabled}
                is-zoom-in-disabled={isZoomInDisabled}
                ontogglemarqueeon={handleMarqueeOn}
                onclicktozoom={handleZoom}
            ></builder_platform_interaction-zoom-panel>
        </div>
    </div>
</template>
