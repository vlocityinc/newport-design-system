<template>
    <div if:true={showSaveAsTypePicker} class="slds-p-horizontal_small slds-p-top_small">
        <lightning-radio-group
            class="slds-text-align_center"
            label={labels.saveAsTypeLabel}
            name="saveAsType"
            options={saveAsTypeOptions}
            type="button"
            onchange={handleSaveAsTypeChange}
            value={flowProperties.saveType}
        >
        </lightning-radio-group>
    </div>
    <div class="slds-p-around_small">
        <builder_platform_interaction-label-description
            dev-name={flowProperties.name}
            dev-name-label={labels.uniqueNameLabel}
            disable-dev-name={savingExistingFlow}
            disable-dev-name-validation
            description={flowProperties.description}
            label={flowProperties.label}
            name-label={labels.nameLabel}
            onpropertychanged={handleEvent}
        >
        </builder_platform_interaction-label-description>

        <div class="slds-m-top_small">
            <lightning-button
                variant="base"
                class={_toggleAdvancedClass}
                label={_toggleAdvancedLabel}
                title={_toggleAdvancedLabel}
                onclick={handleAdvancedToggle}
            ></lightning-button>
        </div>

        <div if:true={isAdvancedShown} class="advanced">
            <lightning-combobox
                if:true={showRunInModeCombobox}
                class="slds-col slds-grow"
                label={labels.runInSystemModeLabel}
                options={_runInModes}
                value={runInMode}
                disabled={systemModeDisabled}
                placeholder={labels.processTypePlaceholderLabel}
                dropdown-alignment="auto"
                field-level-help={runInModeHelp}
                onchange={handleRunInModeChange}
            >
            </lightning-combobox>
            <lightning-combobox
                class="process-type slds-col slds-grow"
                label={labels.processTypeLabel}
                options={_processTypes}
                value={processTypeValue}
                required
                disabled={savingExistingFlow}
                placeholder={labels.processTypePlaceholderLabel}
                dropdown-alignment="auto"
                field-level-help={processTypeFieldLevelHelp}
                onchange={handleProcessTypeChange}
            >
            </lightning-combobox>
            <lightning-combobox
                class="overrides-flow-template slds-col slds-grow"
                label={labels.overridableFlowLabel}
                options={_overridableFlowOptions}
                value={_overriddenFlow}
                disabled={overriddenFlowDisabled}
                placeholder={labels.overridableFlowPlaceholderLabel}
                dropdown-alignment="auto"
                field-level-help={labels.overridableFlowHelpText}
                onchange={handleOverriddenFlowChange}
            >
            </lightning-combobox>
            <div class="slds-list_horizontal slds-p-bottom_medium slds-p-top_small">
                <lightning-input
                    label={labels.templateLabel}
                    type="checkbox"
                    checked={_isTemplate}
                    onchange={handleTemplateCheckBox}
                    disabled={templateDisabled}
                    class="template_check slds-p-top_xx-small"
                >
                </lightning-input>
                <lightning-helptext
                    class="slds-form-element"
                    content={labels.templateCheckHelpText}
                ></lightning-helptext>
                <div class="slds-align_absolute-center">
                    <lightning-input
                        label={labels.overridableLabel}
                        type="checkbox"
                        checked={_isOverridable}
                        onchange={handleOverridableCheckBox}
                        disabled={overridableDisabled}
                        class="overridable_check slds-p-top_xx-small"
                    >
                    </lightning-input>
                    <lightning-helptext
                        class="slds-form-element"
                        content={labels.overridableCheckHelpText}
                    ></lightning-helptext>
                </div>
            </div>

            <lightning-combobox
                if:true={showApiVersionComboBox}
                class="api-version slds-col slds-grow"
                label={labels.apiVersionLabel}
                options={_apiVersionsList}
                value={apiVersion}
                required
                dropdown-alignment="auto"
                placeholder={labels.processTypePlaceholderLabel}
                onchange={handleApiVersionChange}
                spinner-active={apiVersionSpinner}
            >
            </lightning-combobox>

            <div class="slds-m-top_small">
                <builder_platform_interaction-resourced-textarea
                    help-text={labels.instanceLabelHelpText}
                    label={labels.instanceLabel}
                    name={labels.instanceLabel}
                    row-index={_instanceLabelId}
                    value={flowProperties.interviewLabel}
                    onblur={handleInstanceLabelChanged}
                    onchange={handleInstanceLabelChanged}
                >
                </builder_platform_interaction-resourced-textarea>
            </div>

            <div if:true={savingExistingFlow} class="slds-m-top_small">
                <div>{labels.lastModified}</div>
                <div class="lastModified">{lastModifiedText}</div>
            </div>

            <div if:true={savingExistingFlow} class="slds-grid slds-m-top_small">
                <div class="slds-size_1-of-3">
                    {labels.status}:
                    <div>
                        <builder_platform_interaction-flow-status
                            flow-status={flowProperties.status.value}
                        ></builder_platform_interaction-flow-status>
                    </div>
                </div>
                <div class="slds-size_1-of-3">
                    {labels.currentType}:
                    <div class="lastProcessType">{processTypeLabel}</div>
                </div>
                <div class="slds-size_1-of-3 versionNumber">
                    {labels.currentVersion}:
                    <div>{flowProperties.versionNumber}</div>
                </div>
            </div>
        </div>
    </div>
</template>
