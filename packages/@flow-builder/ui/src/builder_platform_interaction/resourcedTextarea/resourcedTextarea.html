<template>
    <lightning-spinner
        if:true={spinnerActive}
        variant="brand"
        alternative-text={spinnerAlternativeText}
    ></lightning-spinner>
    <div class="property-input slds-form-element">
        <label
            if:true={label}
            for={elementType}
            class="slds-form-element__label"
        >
            <abbr
                if:true={isRequired}
                title={labels.required}
                class="slds-required"
                >*</abbr
            >
            {label}
        </label>
        <lightning-helptext
            if:true={helpText}
            class="slds-form-element"
            content={helpText}
        ></lightning-helptext>

        <div class={classList}>
            <div
                class="divParentResourcePickerModeOptions slds-p-around_x-small slds-p-bottom_xx-small slds-button-group-list"
            >
                <div class={computedDivResourcePickerClass}>
                    <!-- TODO: W-6359264 Update element-type to row-index to determine uniqueness if possible -->
                    <builder_platform_interaction-ferov-resource-picker
                        combobox-config={resourceComboBoxConfig}
                        element-config={elementConfig}
                        hide-global-constants
                        element-type={elementType}
                        show-global-variables={showGlobalVariables}
                        hide-new-resource={hideNewResource}
                        onitemselected={handleResourcePickerSelection}
                        onnewinlineresource={handleResourcePickerSelection}
                    >
                    </builder_platform_interaction-ferov-resource-picker>
                </div>
                <builder_platform_interaction-rich-text-plain-text-switch
                    if:true={plainTextAvailable}
                    selected-mode={textModes.plainText}
                >
                </builder_platform_interaction-rich-text-plain-text-switch>
            </div>
            <textarea
                class="slds-textarea slds-input textarea-input"
                name={elementType}
                onblur={handleEvent}
                onchange={handleEvent}
                maxlength={maxLength}
            >
            {_value}
            </textarea>
        </div>
        <div if:true={error} class="slds-has-error">
            <div role="alert" class="slds-form-element__help">{error}</div>
        </div>
    </div>
</template>
