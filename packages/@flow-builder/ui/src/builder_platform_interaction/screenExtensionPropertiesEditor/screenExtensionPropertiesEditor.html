<template>
    <div if:true={field} class="container full-height">
        <div if:true={extensionDescription}>
            <section class="slds-p-horizontal_small">
                <builder_platform_interaction-screen-property-field
                    label={labels.apiNameLabel}
                    name="name"
                    required="required"
                    type="string"
                    value={field.name}
                >
                </builder_platform_interaction-screen-property-field>

                <template
                    for:each={inputParameters}
                    for:item="param"
                    for:index="index"
                >
                    <builder_platform_interaction-screen-extension-attribute-editor
                        key={param.descriptor.apiName}
                        row-index={param.rowIndex}
                        index="-1"
                        descriptor={param.descriptor}
                        attribute={param.attribute}
                        attribute-type="input"
                    >
                    </builder_platform_interaction-screen-extension-attribute-editor>
                </template>
            </section>

            <lightning-accordion
                if:true={hasOutputs}
                allow-multiple-sections-open
                active-section-name="outputsSection"
                class="slds-has-divider slds-p-top_none slds-border_bottom"
            >
                <lightning-accordion-section
                    name="componentVisibility"
                    label={labels.componentVisbilitySectionTitle}
                >
                    <builder_platform_interaction-component-visibility
                        visibility-rule={field.visibilityRule}
                        guid={field.guid}
                    >
                    </builder_platform_interaction-component-visibility>
                </lightning-accordion-section>
            </lightning-accordion>

            <!--  validation text -->

            <div
                if:true={isAdvancedCheckboxDisplayed}
                class="slds-m-top_small"
            >
                <builder_platform_interaction-use-advanced-options-checkbox
                    is-advanced-mode={isAdvancedMode}
                    onuseadvancedoptionsselectionchanged={handleAdvancedOptionsSelectionChange}
                >
                </builder_platform_interaction-use-advanced-options-checkbox>
            </div>
            <div
                if:true={isManualOutputDisplayed}
                class="slds-m-bottom_small slds-m-top_small"
            >
                <h3
                    class="slds-p-left_medium"
                    style="font-size:3;font-weight:bold"
                >
                    {labels.extensionOutputsHeader}
                </h3>
                <div
                    class="slds-p-left_medium slds-p-right_small slds-m-top_small"
                >
                    <template
                        for:each={state.editor.outputParameters}
                        for:item="param"
                        for:index="index"
                    >
                        <builder_platform_interaction-screen-extension-attribute-editor
                            key={param.key}
                            row-index={param.rowIndex}
                            index={index}
                            descriptor={param.descriptor}
                            attribute={param.attribute}
                            attribute-index={param.index}
                            attribute-type="output"
                        >
                        </builder_platform_interaction-screen-extension-attribute-editor>
                    </template>
                </div>
            </div>
        </div>
    </div>
</template>
